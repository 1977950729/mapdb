task(release) << {
    // make mapdb-renamed
    def destDir = file("target/mapdb-renamed");
    destDir.mkdirs()


    //checkout
    exec {
        commandLine 'git'
        args 'clone','git@github.com:jankotek/mapdb.git',destDir,'-b','release-misc'
    }

    exec {
        commandLine 'rm'
        args 'target/mapdb-renamed/pom.xml'
    }

    exec {
        commandLine 'rm'
        args 'target/mapdb-renamed/src/','-rf'
    }


    //copy folder
    copy{
        from '.'
        into destDir
        exclude 'target'
        include '**/*.java'
        exclude '.git'
        filter{
            String line -> line
                    .replaceAll("org.mapdb","org.mapdb10")
        }
    }

    copy{
        from '.'
        into destDir
        exclude 'target'
        exclude '**/*.java'
        exclude '.git'
        filter{
            String line -> line
                    .replaceAll("<artifactId>mapdb-renamed</artifactId>","<artifactId>mapdb-renamed</artifactId>")
                    .replaceAll("<name>mapdb-renamed</name>","<name>mapdb-renamed</name>")
        }
    }

    //rename folders
    exec {
        commandLine 'mv'
        args 'src/main/java/org/mapdb','src/main/java/org/mapdb10'
        workingDir destDir
    }

    exec {
        commandLine 'mv'
        args 'src/test/java/org/mapdb','src/test/java/org/mapdb10'
        workingDir destDir
    }

    //add all files
    exec {
        commandLine 'git'
        args 'add','-A'
        workingDir destDir
    }

    //commit
    exec {
        commandLine 'git'
        args 'commit','-m','switch-source'
        workingDir destDir
    }

    exec {
        commandLine 'git'
        args 'push'
        workingDir destDir
    }

/*    exec{
        commandLine 'mvn'
        args 'clean','test','release:prepare','release:perform'
        workingDir destDir
    }
  */
}