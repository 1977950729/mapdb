
task(release) << {
    // make mapdb-renamed
    def destDir = file("target/mapdb-renamed");
    destDir.mkdirs()

    //copy folder
    copy{
        from '.'
        into destDir
        exclude 'target'
        include '**/*.java'
        filter{
            String line -> line
                    .replaceAll("org.mapdb","org.mapdb10")
        }
    }

    copy{
        from '.'
        into destDir
        exclude 'target'
        exclude '**/*.java'
        filter{
            String line -> line
                    .replaceAll("<name>mapdb</name>","<name>mapdb-renamed</name>")
                    .replaceAll("<scm>","<!-- <scm>")
                    .replaceAll("</scm>","<scm> -->")
        }
    }

    //rename folders
    exec {
        commandLine 'mv'
        args 'target/mapdb-renamed/src/main/java/org/mapdb','target/mapdb-renamed/src/main/java/org/mapdb10'
    }
    exec {
        commandLine 'mv'
        args 'target/mapdb-renamed/src/test/java/org/mapdb','target/mapdb-renamed/src/test/java/org/mapdb10'
    }

    exec{
        commandLine 'mvn'
        args 'clean','test','release:prepare','release:perform'
        workingDir destDir
    }
    
}